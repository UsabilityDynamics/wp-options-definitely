/*!
 * Options, Definitely - Version 1.0.0
 * 
 * Felix Arntz <felix-arntz@leaves-and-love.net>
 */
+function(a){"use strict";a(document).ready(function(a){function b(b){var c=a(b.element);return c.data().hasOwnProperty("image")?'<div class="option-box" style="background-image:url('+c.data("image")+');"></div>'+b.text:c.data().hasOwnProperty("color")?'<div class="option-box" style="background-color:#'+c.data("color")+';"></div>'+b.text:b.text}var c={containerCss:{width:"100%","max-width":"300px"},closeOnSelect:!1,formatResult:b,formatSelection:b,escapeMarkup:function(a){return a},minimumResultsForSearch:8};if(a("select").select2(c),a(".form-table").on("change",'input[type="range"], input[type="color"]',function(){a("#"+a(this).attr("id")+"-"+a(this).attr("type")+"-viewer").val(a(this).val())}),a(".form-table").on("change",'input[class="range-viewer"], input[class="color-viewer"]',function(){a(this).next("input").val(a(this).val())}),a(".form-table").on("click",".radio-group .radio div",function(){var b=a(this).attr("id").replace("-asset","");a(this).parent().parent().find(".radio div").removeClass("checked"),a(this).addClass("checked"),a("#"+b).prop("checked",!0)}),a(".form-table").on("change",".radio-group .radio input",function(){a(this).parent().parent().find(".radio div").removeClass("checked")}),a(".form-table").on("click",".checkbox-group .checkbox div",function(){var b=a(this).attr("id").replace("-asset","");a(this).hasClass("checked")?(a(this).removeClass("checked"),a("#"+b).prop("checked",!1)):(a(this).addClass("checked"),a("#"+b).prop("checked",!0))}),null!=wp.media){var d=!0,e=wp.media.editor.send.attachment;a(".form-table").on("click",".media-button",function(){var b=(wp.media.editor.send.attachment,a(this)),c=b.attr("id").replace("-media-button","");return d=!0,wp.media.editor.send.attachment=function(b,f){return d?(a("#"+c).val(f.id),a("#"+c+"-media-title").val(f.title),"image"===f.type?a("#"+c+"-media-image").length>0?a("#"+c+"-media-image").attr("src",f.url):a("#"+c+"-media-button").after('<img id="'+c+'-media-image" class="media-image" src="'+f.url+'" />'):a("#"+c+"-media-link").length>0?a("#"+c+"-media-link").attr("href",f.url):a("#"+c+"-media-button").after('<a id="'+c+'-media-link" class="media-link" href="'+f.url+'" target="_blank">Open file</a>'),void 0):e.apply(this,[b,f])},wp.media.editor.open(b),!1}),a(".add_media").on("click",function(){d=!1})}a(".repeatable").length>0&&void 0!==_wpod_admin&&a(".repeatable").each(function(){a(this).on("click",".new-repeatable-button",function(b){b.preventDefault();var d=a("#"+b.delegateTarget.id),e={action:_wpod_admin.action_add_repeatable,nonce:_wpod_admin.nonce,slug:d.data("slug"),parent_slug:d.data("parent-slug"),key:d.find(".repeatable-row").length};a.post(ajaxurl,e,function(f){if(""!==f&&d.find(".repeatable-row").length===e.key){d.append(f).find("select").select2(c);var g=parseInt(a("#"+b.delegateTarget.id).data("limit"),10);g>0&&g===a("#"+b.delegateTarget.id).find(".repeatable-row").length&&a("#"+b.delegateTarget.id).find(".new-repeatable-button").hide()}})}),a(this).on("click",".remove-repeatable-button",function(b){b.preventDefault();var c=a("#"+b.delegateTarget.id),d=c.find(".repeatable-row"),e=parseInt(a(this).data("number"),10)+1;d.filter(":nth-child("+(e+1)+")").remove(),d.filter(":gt("+(e-1)+")").each(function(){var b=a(this),c=parseInt(b.find(".remove-repeatable-button").data("number"),10),d=c-1;b.find("span:first").html(b.find("span:first").html().replace((c+1).toString(),(d+1).toString())),b.find(".repeatable-col input, .repeatable-col select, .repeatable-col img, .repeatable-col a").each(function(){a(this).attr("id")&&a(this).attr("id",a(this).attr("id").replace(c.toString(),d.toString())),a(this).attr("name")&&a(this).attr("name",a(this).attr("name").replace(c.toString(),d.toString()))}),b.find(".remove-repeatable-button").data("number",d.toString())});var f=parseInt(a("#"+b.delegateTarget.id).data("limit"),10);f>0&&f>a("#"+b.delegateTarget.id).find(".repeatable-row").length&&a("#"+b.delegateTarget.id).find(".new-repeatable-button").show()})})})}(jQuery);